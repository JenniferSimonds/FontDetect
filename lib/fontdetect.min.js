FontDetect=function(){function e(){if(!t){t=!0;var e=document.body,n=document.body.firstChild,o=document.createElement("div");o.id="fontdetectHelper",i=document.createElement("span"),i.innerText="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",o.appendChild(i),e.insertBefore(o,n),o.style.position="absolute",o.style.visibility="hidden",o.style.top="-200px",o.style.left="-100000px",o.style.width="100000px",o.style.height="200px",o.style.fontSize="100px"}}var t=!1,n=["serif","sans-serif","monospace","cursive","fantasy"],i=null;return{onFontLoaded:function(n,i,o,s){if(n){var r=s&&s.msInterval?s.msInterval:100,a=s&&s.msTimeout?s.msTimeout:2e3;if(i||o){if(t||e(),this.isFontLoaded(n))return void(i&&i(n));var l=this,f=(new Date).getTime(),d=setInterval(function(){if(l.isFontLoaded(n))return clearInterval(d),void i(n);var e=(new Date).getTime();e-f>a&&(clearInterval(d),o&&o(n))},r)}}},isFontLoaded:function(o){var s=0,r=0;t||e();for(var a=0;a<n.length;++a){if(i.style.fontFamily=o+","+n[a],s=i.offsetWidth,a>0&&s!=r)return!1;r=s}return!0},whichFont:function(e){for(var t=$(e).css("font-family"),n=t.split(","),i=n.shift();i;){if(i=i.replace(/^\s*['"]?\s*([^'"]*)\s*['"]?\s*$/,"$1"),this.isFontLoaded(i))return i;i=n.shift()}return null}}}();
